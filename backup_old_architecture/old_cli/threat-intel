#!/usr/bin/env python3
"""Entry point script for threat intelligence aggregator CLI."""

import sys
import os
from pathlib import Path

def check_virtual_env():
    """Ensure we're running in a virtual environment."""
    # Check if we're in a virtual environment
    if not hasattr(sys, 'real_prefix') and not (hasattr(sys, 'base_prefix') and sys.base_prefix != sys.prefix):
        venv_path = Path(__file__).parent / "venv"
        if venv_path.exists():
            print("❌ Virtual environment not activated!")
            print("Please run: source venv/bin/activate")
            print("Then try again: ./threat-intel <command>")
            sys.exit(1)
        else:
            print("❌ Virtual environment not found!")
            print("Please create it first: python3 -m venv venv")
            print("Then activate: source venv/bin/activate")
            print("And install dependencies: pip install -r requirements.txt")
            sys.exit(1)

# Check virtual environment before doing anything else
check_virtual_env()

# Add src directory to Python path
src_path = Path(__file__).parent / "src"
sys.path.insert(0, str(src_path))

from cli.main import cli

if __name__ == '__main__':
    cli()
